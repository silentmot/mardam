function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=_superPropBase(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Rreu:function(t,e,n){"use strict";n.r(e),n.d(e,"ContractsModule",(function(){return fe}));var r,i=n("ofXK"),o=n("PCNd"),a=n("tyNb"),s=n("ey9i"),l=n("C3ze"),c=n("jtS9"),d=n("2JTG"),u=(n("Bf6M"),n("DaQp")),m=n("3Pt+"),p=n("5oty"),f=n("R2p+"),x=n("wbvY"),h=n("ZEsB"),g=n("XNiG"),v=n("fXoL"),y=n("sYmb"),b=((r=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a,s){var l;return _classCallCheck(this,n),(l=e.call(this,t,r,o,i)).toArabic=a,l.translateService=s,l.searchKey="keyword",l.clearUnitsFieldOnChange=new g.a,l.back$=new g.a,l.permissionsKey="contract",l.lists.units=[],l}return _createClass(n,[{key:"routerPrefix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t||"contracts"}},{key:"refactorItem",value:function(t){return this.loaded.next(!0),"administrator"===t.position&&delete t.role,t}},{key:"refactorFilters",value:function(t){return _get(_getPrototypeOf(n.prototype),"refactorFilters",this).call(this,t),t.per_page=50,t}},{key:"refactorFormBeforeSubmit",value:function(t){return t.stations=t.stations.filter((function(t){return t.station_id})),t}},{key:"listPrepareOperations",value:function(t){var e=this;return _get(_getPrototypeOf(n.prototype),"listPrepareOperations",this).call(this,t),t.data.forEach((function(t){t.contract_number=t.contract_number?e.toArabic.transform(t.contract_number.toString()):"\u0644\u0627 \u064a\u0648\u062c\u062f ",t.start_at=t.start_at?e.toArabic.transform(e.shared.dateToCustomFormat(t.start_at,"DD/MM/YYYY")).split("/").reverse().join("/"):"\u0644\u0627 \u064a\u0648\u062c\u062f",t.end_at=t.end_at?e.toArabic.transform(e.shared.dateToCustomFormat(t.end_at,"DD/MM/YYYY")).split("/").reverse().join("/"):"\u0644\u0627 \u064a\u0648\u062c\u062f",t.districts_count=t.districts_count?e.setPrefixTd(t.districts_count,"District"):"\u0644\u0627 \u064a\u0648\u062c\u062f",t.units_count=t.units_count?e.setPrefixTd(t.units_count,"Unit"):"\u0644\u0627 \u064a\u0648\u062c\u062f ",t.contact.phone=t.contact.phone?e.toArabic.transform(t.contact.phone):"\u0644\u0627 \u064a\u0648\u062c\u062f"})),t}},{key:"refactorSelectListsResponse",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return[{prefix:"units",value:"plate_number"},{prefix:"neighborhood",value:"name"}].forEach((function(r){t===r.prefix&&(e.data&&e.data.length&&e.data.map((function(t){t.name=t[r.value]})),n.lists["display"+r.prefix]=e.data)})),"contractors"===t?(e.data&&e.data.length&&(e.data=e.data.map((function(t){return Object.assign(Object.assign({},t),{name:t.name_ar+" - "+t.name_en,name1:t.name_ar,name2:t.name_en})}))),e.data):e.data?r?e:e.data:void 0}},{key:"setPrefixTd",value:function(t,e){return t?t>10||1===t?"".concat(this.toArabic.transform(t.toString())," ").concat(this.translateService.instant(""+this.cid)["single"+e]):"".concat(this.toArabic.transform(t.toString())," ").concat(this.translateService.instant(""+this.cid)["multi"+e]):"\u0644\u0627 \u064a\u0648\u062c\u062f"}},{key:"getRequest",value:function(t){return this.api.request("GET",t,{},{},{})}},{key:"onChangedValue",value:function(t,e){var r=this;if(_get(_getPrototypeOf(n.prototype),"onChangedValue",this).call(this,t,e),"contractor_id"===t.name&&e&&e.id){var i="contractors/"+e.id+"/units";this.itemID&&(i="contractors/"+e.id+"/units?except_contract="+this.itemID),this.getRequest(i).subscribe((function(t){r.lists.units=t.data.filter((function(t){return t.name=t.plate_number,t})),r.clearUnitsFieldOnChange.next(!0)}))}"district"===t.name&&e&&e.id&&(this.clearInput.next("neighborhood"),this.getRequest("districts/"+e.id+"/neighborhoods").subscribe((function(t){r.lists.neighborhood=t.data,r.clearInput.next("stations")})))}},{key:"featureProps",get:function(){return[{name:"status",prop:"status",form:{formFieldType:"toggle",Validators:[],cssClass:"green",initValue:!0,groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contractor"}}}},{name:"id",prop:"contract_id",list:{hidden:!0,name:"contract_number",sortable:!0,filterFieldType:"text",cellInnerCssClass:"arabicFont"}},{name:"contract_number",prop:"contract_number",list:{sortable:!0,filterFieldType:"text",cellInnerCssClass:"arabicFont"},form:{Validators:[m.G.required,f.a.numberValidator],formFieldType:"text_number",grid:{lt_xl:"100%",gt_lg:"100%"},minLength:1,maxLength:3,minValue:{value:1},maxValue:{value:100},groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contractor"}}}},{prop:"contractor.name_ar",name:"contractor_name_ar",list:{name:"contractor",sortable:!0,filterFieldType:"text",additionalContent:[{prop:"contractor.name_en",list:{cellCssClass:"second_row"}}]},form:{Validators:[],formFieldType:"hidden",listPrefix:"districts",dataUrl:"districts?active=1"}},{name:"contractor_id",prop:"contractor_id",form:{formFieldType:"ng_select_multi_lines",listPrefix:"contractors",dataUrl:"contractors",Validators:[m.G.required],onChange:!0,grid:{lt_xl:"100%"},groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contractor",steps:!0}}}},{name:"start_at",prop:"start_at",list:{sortable:!0,filterFieldType:"text",cellInnerCssClass:"arabicFont ltr"},form:{formFieldType:"datepicker",Validators:[m.G.required],grid:{lt_xl:"50%"},groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contractor"}},dateOptions:{max:{prop:"end_at"}}}},{name:"end_at",prop:"end_at",list:{sortable:!0,filterFieldType:"text",cellInnerCssClass:"arabicFont ltr"},form:{Validators:[m.G.required],formFieldType:"datepicker",groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contractor"}},grid:{lt_xl:"50%"},dateOptions:{min:{prop:"start_at"}}}},{name:"districts_count",prop:"districts_count",list:{sortable:!0,filterFieldType:"text",cellInnerCssClass:"arabicFont"}},{name:"contact_name",prop:"contact_name",list:{hidden:!0},form:{Validators:[m.G.required],formFieldType:"text",minLength:3,maxLength:50,groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contact"}}}},{name:"contact_title",prop:"contact_title",form:{formFieldType:"text",groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contact"}}}},{name:"contact_email",prop:"contact_email",form:{formFieldType:"email",Validators:[m.G.email],suffix:[{list:{staticText:"common.unit_types.sar",translate:!0}}],grid:{gt_lg:"100%",lt_xl:"100%",lt_lg:"100%",lt_md:"100%",lt_sm:"100%"},groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contact"}}}},{name:"contact_phone",prop:"contact_phone",list:{hidden:!0},form:{formFieldType:"text_number",Validators:[m.G.required,f.a.mobileNumber],grid:{gt_lg:"50%",lt_xl:"50%",lt_lg:"50%",lt_md:"50%",lt_sm:"100%"},maxLength:10,minLength:10,groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.contact"}}}},{name:"units_count",prop:"units_count",list:{sortable:!0,filterFieldType:"text",cellInnerCssClass:"arabicFont"}},{name:"contact_name",prop:"contacts",list:{sortable:!0,name:"contacts",filterFieldType:"text",additionalContent:[{prop:"contact.name",list:{cellCssClass:"second_row f-s-16"}},{prop:"contact.phone",list:{cellCssClass:"second_row arabicFont"}},{prop:"contact.email",list:{cellCssClass:"second_row"}}]}},{name:"districts",prop:"districts",form:{formFieldType:"formArray",name:"districts",groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.district"}},arrayForm:[{name:"district",prop:"district",list:{hidden:!0},form:{Validators:[m.G.required],formFieldType:"ng_select",listPrefix:"districts",listPaginate:!0,onChange:!0}},{name:"neighborhood",prop:"neighborhood",list:{hidden:!0},form:{Validators:[m.G.required],formFieldType:"custom_ng_select",listPrefix:"neighborhood",listPaginate:!0,onChange:!0}},{name:"units",prop:"units.name",list:{hidden:!1},groupFields:[{prop:"units",type:"input_array"}],form:{Validators:[m.G.required],formFieldType:"custom_ng_select_multiple",listPrefix:"units",listPaginate:!0,appendTo:".default-form",onChange:!0}}]}},{name:"stations",prop:"stations",form:{formFieldType:"formArray",name:"stations",groupBy:{tabGroup:{tabGroupName:"contracts_main_group",tabName:"contracts.transition_stations"}},arrayForm:[{name:"station_id",prop:"station_id",list:{hidden:!0},form:{Validators:[],formFieldType:"ng_select",listPrefix:"transition_station",listPaginate:!0,onChange:!0}},{name:"stations_units",prop:"stations_units",list:{hidden:!0},groupFields:[{prop:"stations_units",type:"input_array"}],form:{Validators:[],formFieldType:"custom_ng_select_multiple",listPrefix:"transition_stations_units",listPaginate:!0,appendTo:".default-form",onChange:!0}}]}}]}}]),n}(d.a)).\u0275fac=function(t){return new(t||r)(v["\u0275\u0275inject"](a.d),v["\u0275\u0275inject"](u.a),v["\u0275\u0275inject"](x.a),v["\u0275\u0275inject"](p.a),v["\u0275\u0275inject"](h.a),v["\u0275\u0275inject"](y.d))},r.\u0275prov=v["\u0275\u0275defineInjectable"]({token:r,factory:r.\u0275fac,providedIn:"root"}),r),_=n("fquO"),C=n("R0Ic"),S=n("awpj"),I=n("YF97"),E=n("0IaG"),F=n("GJmQ"),w=n("/uUt"),k=n("Kj3r"),O=n("aEDk"),T=n("NFeN"),A=n("znSr"),L=n("XiUz"),G=n("Wp6s"),V=n("0dmO"),j=n("Xa2L"),D=n("TNR2"),P=n("sbsa"),R=n("bTqV"),N=n("xHqg"),B=n("Zm2X"),$=n("1jcm"),z=n("vfq7");function q(t,e){1&t&&(v["\u0275\u0275elementStart"](0,"div",19),v["\u0275\u0275text"](1,"\n      "),v["\u0275\u0275element"](2,"mat-spinner",20),v["\u0275\u0275text"](3,"\n    "),v["\u0275\u0275elementEnd"]()),2&t&&(v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("diameter",60))}var U=function(t){return[t]};function M(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"a",31),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](4,U,n.url)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,2,n.displayName))}}function H(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"a",32),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,n.displayName))}}function Y(t,e){1&t&&(v["\u0275\u0275elementStart"](0,"span",33),v["\u0275\u0275text"](1,"\n                "),v["\u0275\u0275elementStart"](2,"mat-icon"),v["\u0275\u0275text"](3,"chevron_right"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](4,"\n              "),v["\u0275\u0275elementEnd"]())}function W(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"div",27),v["\u0275\u0275text"](1,"\n              "),v["\u0275\u0275template"](2,M,3,6,"a",28),v["\u0275\u0275text"](3,"\n              "),v["\u0275\u0275template"](4,H,3,3,"a",29),v["\u0275\u0275text"](5,"\n              "),v["\u0275\u0275template"](6,Y,5,0,"span",30),v["\u0275\u0275text"](7,"\n            "),v["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,r=e.last;v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!n.terminal),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",n.terminal),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!r)}}function K(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",21),v["\u0275\u0275text"](1,"\n        "),v["\u0275\u0275elementStart"](2,"span",22),v["\u0275\u0275text"](3,"\n          "),v["\u0275\u0275elementStart"](4,"breadcrumb",23,24),v["\u0275\u0275text"](6,"\n            "),v["\u0275\u0275template"](7,W,8,3,"div",25),v["\u0275\u0275text"](8,"\n          "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](9,"\n        "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](10,"\n        "),v["\u0275\u0275elementStart"](11,"app-form-footer",26),v["\u0275\u0275listener"]("submit",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().formSubmission()}))("saveAddNew",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().formSubmission(!0)}))("cancel",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().cancelFormSubmission()})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](12,"\n      "),v["\u0275\u0275elementEnd"]()}if(2&t){var r=v["\u0275\u0275reference"](5),i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("hidden",!i.showBreadcrumb),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",r.breadcrumbs),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("form",i.form)("isSaveAddNew",i.isSaveAddNew)("isEdit",i.isEdit)("isClone",i.isClone)("isSubmitted",i.isSubmitted)}}function X(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"div",41),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("\n                            ",v["\u0275\u0275pipeBind1"](2,1,n[0]),"\n                          ")}}function J(t,e){1&t&&v["\u0275\u0275text"](0,"\n                            ")}var Q=function(t){return{form:t}};function Z(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                        "),v["\u0275\u0275elementStart"](2,"div",37),v["\u0275\u0275text"](3,"\n                          "),v["\u0275\u0275template"](4,X,3,3,"div",38),v["\u0275\u0275text"](5,"\n                          "),v["\u0275\u0275elementStart"](6,"div",39),v["\u0275\u0275text"](7,"\n                            "),v["\u0275\u0275template"](8,J,1,0,"ng-template",40),v["\u0275\u0275text"](9,"\n                          "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](10,"\n                        "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](11,"\n                      "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit,r=v["\u0275\u0275nextContext"](4),i=v["\u0275\u0275reference"](55);v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf","defaultSection"!==n[0]),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("fxLayoutGap",r.gridGapSize),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",v["\u0275\u0275pureFunction1"](4,Q,n[1]))}}function tt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                      "),v["\u0275\u0275template"](2,Z,12,6,"ng-container",36),v["\u0275\u0275pipe"](3,"pairs"),v["\u0275\u0275text"](4,"\n                    "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit,r=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",v["\u0275\u0275pipeBind1"](3,2,n[1]))("ngForTrackBy",r.trackByFn)}}function et(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                    "),v["\u0275\u0275template"](2,tt,5,4,"ng-container",36),v["\u0275\u0275pipe"](3,"pairs"),v["\u0275\u0275text"](4,"\n                  "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit,r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",v["\u0275\u0275pipeBind1"](3,2,n[1]))("ngForTrackBy",r.trackByFn)}}function nt(t,e){1&t&&v["\u0275\u0275element"](0,"mat-icon",49)}function rt(t,e){if(1&t&&(v["\u0275\u0275text"](0,"\n                            "),v["\u0275\u0275elementStart"](1,"span"),v["\u0275\u0275text"](2,"\n                              "),v["\u0275\u0275template"](3,nt,1,0,"mat-icon",48),v["\u0275\u0275text"](4,"\n                              "),v["\u0275\u0275elementStart"](5,"span"),v["\u0275\u0275text"](6),v["\u0275\u0275pipe"](7,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](8,"\n                            "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](9,"\n                          ")),2&t){var n=v["\u0275\u0275nextContext"](),r=n.index,i=n.$implicit,o=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("tab_error",o.tabsErrors[r]),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",o.tabsErrors[r]),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](7,4,i[0]))}}function it(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"div",41),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("\n                                  ",v["\u0275\u0275pipeBind1"](2,1,n[0]),"\n                                ")}}function ot(t,e){1&t&&v["\u0275\u0275text"](0,"\n                                  ")}function at(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                              "),v["\u0275\u0275elementStart"](2,"div",50),v["\u0275\u0275text"](3,"\n                                "),v["\u0275\u0275template"](4,it,3,3,"div",38),v["\u0275\u0275text"](5,"\n                                "),v["\u0275\u0275elementStart"](6,"div",51),v["\u0275\u0275text"](7,"\n                                  "),v["\u0275\u0275template"](8,ot,1,0,"ng-template",40),v["\u0275\u0275text"](9,"\n                                  "),v["\u0275\u0275text"](10,"\n                                  "),v["\u0275\u0275text"](11,"\n\n                                  "),v["\u0275\u0275text"](12,"\n                                  "),v["\u0275\u0275text"](13,"\n                                  "),v["\u0275\u0275text"](14,"\n                                  "),v["\u0275\u0275text"](15,"\n                                  "),v["\u0275\u0275text"](16,"\n                                  "),v["\u0275\u0275text"](17,"\n                                  "),v["\u0275\u0275text"](18,"\n                                  "),v["\u0275\u0275text"](19,"\n                                  "),v["\u0275\u0275text"](20,"\n                                  "),v["\u0275\u0275text"](21,"\n                                  "),v["\u0275\u0275text"](22,"\n                                  "),v["\u0275\u0275text"](23,"\n                                  "),v["\u0275\u0275text"](24,"\n                                  "),v["\u0275\u0275text"](25,"\n                                  "),v["\u0275\u0275text"](26,"\n                                  "),v["\u0275\u0275text"](27,"\n                                  "),v["\u0275\u0275text"](28,"\n                                  "),v["\u0275\u0275text"](29,"\n                                  "),v["\u0275\u0275text"](30,"\n                                "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](31,"\n                              "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](32,"\n                              "),v["\u0275\u0275elementStart"](33,"div",52),v["\u0275\u0275text"](34,"\n                                "),v["\u0275\u0275elementStart"](35,"button",53),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](4).stepBack()})),v["\u0275\u0275text"](36,"\n                                  "),v["\u0275\u0275element"](37,"mat-icon",54),v["\u0275\u0275text"](38,"\n\n                                  "),v["\u0275\u0275elementStart"](39,"span",55),v["\u0275\u0275text"](40),v["\u0275\u0275pipe"](41,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](42,"\n                                "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](43,"\n                                "),v["\u0275\u0275elementStart"](44,"button",53),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var t=v["\u0275\u0275nextContext"]().index,e=v["\u0275\u0275nextContext"](2).$implicit,r=v["\u0275\u0275nextContext"]();return r.toNext(e,t),r.groupTabCurrErrors(e[1],t)})),v["\u0275\u0275text"](45,"\n                                  "),v["\u0275\u0275elementStart"](46,"span",55),v["\u0275\u0275text"](47),v["\u0275\u0275pipe"](48,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](49,"\n                                  "),v["\u0275\u0275element"](50,"mat-icon",56),v["\u0275\u0275text"](51,"\n                                "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](52,"\n                              "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](53,"\n                            "),v["\u0275\u0275elementContainerEnd"]()}if(2&t){var r=e.$implicit,i=v["\u0275\u0275nextContext"]().index;v["\u0275\u0275nextContext"]();var o=v["\u0275\u0275reference"](3),a=v["\u0275\u0275nextContext"]().$implicit,s=v["\u0275\u0275nextContext"](),l=v["\u0275\u0275reference"](55);v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf","defaultSection"!==r[0]),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("fxLayoutGap",s.gridGapSize),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngTemplateOutlet",l)("ngTemplateOutletContext",v["\u0275\u0275pureFunction1"](14,Q,r[1])),v["\u0275\u0275advance"](27),v["\u0275\u0275property"]("disabled",0===i||s.editId),v["\u0275\u0275advance"](2),v["\u0275\u0275attribute"]("size","24px"),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](41,10,"pagination.previous")),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("disabled",s.getLengthOfObject(a[1])-1===i||2===o.selectedIndex&&!s.items.length||s.editId),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](48,12,"pagination.next")),v["\u0275\u0275advance"](3),v["\u0275\u0275attribute"]("size","24px")}}function st(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                        "),v["\u0275\u0275elementStart"](2,"mat-step",45),v["\u0275\u0275text"](3,"\n                          "),v["\u0275\u0275template"](4,rt,10,6,"ng-template",46),v["\u0275\u0275text"](5,"\n                          "),v["\u0275\u0275elementStart"](6,"div",47),v["\u0275\u0275text"](7,"\n                            "),v["\u0275\u0275template"](8,at,54,16,"ng-container",36),v["\u0275\u0275pipe"](9,"pairs"),v["\u0275\u0275text"](10,"\n                          "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](11,"\n                        "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](12,"\n                      "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit,r=e.index,i=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("completed",!!i.steperComplete&&0===r),v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("ngForOf",v["\u0275\u0275pipeBind1"](9,3,n[1]))("ngForTrackBy",i.trackByFn)}}function lt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                    "),v["\u0275\u0275elementStart"](2,"mat-horizontal-stepper",42,43),v["\u0275\u0275text"](4,"\n                      "),v["\u0275\u0275template"](5,st,13,5,"ng-container",44),v["\u0275\u0275pipe"](6,"pairs"),v["\u0275\u0275text"](7,"\n                    "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](8,"\n                  "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit,r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("linear",!0)("selectedIndex",r.service.getActiveTab(n[0]))("ngClass",n[0]),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",v["\u0275\u0275pipeBind1"](6,4,n[1]))}}var ct=function(t){return{"margin-right":t}};function dt(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"div",34),v["\u0275\u0275text"](1,"\n                  "),v["\u0275\u0275text"](2,"\n                  "),v["\u0275\u0275template"](3,et,5,4,"ng-container",35),v["\u0275\u0275text"](4,"\n                  "),v["\u0275\u0275text"](5,"\n\n                  "),v["\u0275\u0275text"](6,"\n                  "),v["\u0275\u0275template"](7,lt,9,6,"ng-container",35),v["\u0275\u0275text"](8,"\n                  "),v["\u0275\u0275text"](9,"\n                "),v["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,r=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("ngStyle",v["\u0275\u0275pureFunction1"](3,ct,"-"+r.gridGapSize)),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf","defaultGroup"===n[0]),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf","defaultGroup"!==n[0])}}function ut(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",57),v["\u0275\u0275text"](1,"\n        "),v["\u0275\u0275element"](2,"span"),v["\u0275\u0275text"](3,"\n        "),v["\u0275\u0275elementStart"](4,"app-custom-form-footer",26),v["\u0275\u0275listener"]("submit",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().formSubmission()}))("saveAddNew",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().formSubmission(!0)}))("cancel",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().cancelFormSubmission()})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](5,"\n      "),v["\u0275\u0275elementEnd"]()}if(2&t){var r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("form",r.form)("isSaveAddNew",r.isSaveAddNew)("isEdit",r.isEdit)("isClone",r.isClone)("isSubmitted",r.isSubmitted)}}function mt(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",58),v["\u0275\u0275text"](1,"\n    "),v["\u0275\u0275elementStart"](2,"button",59),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().loadDummyData()})),v["\u0275\u0275text"](3,"\n      "),v["\u0275\u0275elementStart"](4,"mat-icon",60),v["\u0275\u0275text"](5,"battery_unknown"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](6,"\n    "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](7,"\n  "),v["\u0275\u0275elementEnd"]()}}function pt(t,e){1&t&&v["\u0275\u0275text"](0,"\n        ")}var ft=function(t,e,n){return{field:t,formGroup:e,formArrayWrap:n}};function xt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n        "),v["\u0275\u0275template"](2,pt,1,0,"ng-template",40),v["\u0275\u0275text"](3,"\n      "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"](2).$implicit,r=v["\u0275\u0275nextContext"](),i=r.formGroup,o=r.formArrayWrap;v["\u0275\u0275nextContext"]();var a=v["\u0275\u0275reference"](63);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",v["\u0275\u0275pureFunction3"](2,ft,n,i,o))}}function ht(t,e){1&t&&v["\u0275\u0275text"](0," ")}var gt=function(t){return{field:t}};function vt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n        "),v["\u0275\u0275template"](2,ht,1,0,"ng-template",40),v["\u0275\u0275text"](3,"\n      "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"](2).$implicit;v["\u0275\u0275nextContext"](2);var r=v["\u0275\u0275reference"](63);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngTemplateOutlet",r)("ngTemplateOutletContext",v["\u0275\u0275pureFunction1"](2,gt,n))}}function yt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n      "),v["\u0275\u0275text"](2,"\n      "),v["\u0275\u0275template"](3,xt,4,6,"ng-container",35),v["\u0275\u0275text"](4,"\n      "),v["\u0275\u0275template"](5,vt,4,4,"ng-container",35),v["\u0275\u0275text"](6,"\n    "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"](2).formGroup;v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",n),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!n)}}function bt(t,e){1&t&&v["\u0275\u0275text"](0,"\n            ")}var _t=function(t){return{id:t}},Ct=function(t,e,n){return{form:t,formGroup:e,formArrayWrap:n}};function St(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"div",65),v["\u0275\u0275text"](1,"\n          "),v["\u0275\u0275elementStart"](2,"div",66),v["\u0275\u0275text"](3,"\n            "),v["\u0275\u0275template"](4,bt,1,0,"ng-template",40),v["\u0275\u0275text"](5,"\n            "),v["\u0275\u0275text"](6,"\n            "),v["\u0275\u0275text"](7,"\n            "),v["\u0275\u0275text"](8,"\n            "),v["\u0275\u0275text"](9,"\n            "),v["\u0275\u0275text"](10,"\n            "),v["\u0275\u0275text"](11,"\n            "),v["\u0275\u0275text"](12,"\n            "),v["\u0275\u0275text"](13,"\n            "),v["\u0275\u0275text"](14,"\n            "),v["\u0275\u0275text"](15,"\n          "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](16,"\n        "),v["\u0275\u0275elementEnd"]()),2&t){var n=e.index,r=v["\u0275\u0275nextContext"](2).$implicit,i=v["\u0275\u0275nextContext"](2),o=v["\u0275\u0275reference"](55);v["\u0275\u0275property"]("formArrayName",r.form.name),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("formGroupName",n)("hidden",i.editId||0===i.editId?n!==i.editId:n<i.getArrayFormControls(null==r||null==r.form?null:r.form.name).length-1),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",v["\u0275\u0275pureFunction3"](7,Ct,r.form.arrayForm,v["\u0275\u0275pureFunction1"](5,_t,n),r.form.name))}}function It(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"button",67),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](4).cancelUpdate()})),v["\u0275\u0275text"](1,"\n          "),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"]()}2&t&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("\n          ",v["\u0275\u0275pipeBind1"](3,1,"common.cancel"),"\n        "))}function Et(t,e){1&t&&v["\u0275\u0275text"](0,"\n      ")}var Ft=function(t,e,n){return{array:t,arrayForm:e,formName:n}};function wt(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n      "),v["\u0275\u0275elementStart"](2,"div",61),v["\u0275\u0275text"](3,"\n        "),v["\u0275\u0275text"](4,"\n        "),v["\u0275\u0275template"](5,St,17,11,"div",62),v["\u0275\u0275text"](6,"\n      "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](7,"\n      "),v["\u0275\u0275elementStart"](8,"div"),v["\u0275\u0275text"](9,"\n        "),v["\u0275\u0275elementStart"](10,"button",63),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var t=v["\u0275\u0275nextContext"]().$implicit;return v["\u0275\u0275nextContext"](2).addArrayItem(t.form.arrayForm,t.form.name)})),v["\u0275\u0275text"](11,"\n          "),v["\u0275\u0275text"](12),v["\u0275\u0275pipe"](13,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](14,"\n        "),v["\u0275\u0275template"](15,It,4,3,"button",64),v["\u0275\u0275text"](16,"\n      "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](17,"\n      "),v["\u0275\u0275template"](18,Et,1,0,"ng-template",40),v["\u0275\u0275text"](19,"\n    "),v["\u0275\u0275elementContainerEnd"]()}if(2&t){var r=v["\u0275\u0275nextContext"]().$implicit,i=v["\u0275\u0275nextContext"](2),o=v["\u0275\u0275reference"](59);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("formGroup",i.Form),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",i.getArrayFormControls(r.form.name)),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("disabled",i.btnDisabled),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("\n          ",v["\u0275\u0275pipeBind1"](13,7,"common.add"),"\n        "),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",i.editId||0==i.editId),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",v["\u0275\u0275pureFunction3"](9,Ft,i.getArrayFormControls(r.form.name),r.form.arrayForm,r.form.name))}}function kt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n    "),v["\u0275\u0275text"](2,"\n    "),v["\u0275\u0275template"](3,yt,7,2,"ng-container",35),v["\u0275\u0275text"](4,"\n    "),v["\u0275\u0275text"](5,"\n    "),v["\u0275\u0275text"](6,"\n    "),v["\u0275\u0275template"](7,wt,20,13,"ng-container",35),v["\u0275\u0275text"](8,"\n    "),v["\u0275\u0275text"](9,"\n  "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit,r=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",(null==n?null:n.form)&&"formArray"!=(null==n||null==n.form?null:n.form.formFieldType)&&r.fieldShowConditions(n)),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf","formArray"==(null==n||null==n.form?null:n.form.formFieldType))}}function Ot(t,e){if(1&t&&(v["\u0275\u0275text"](0,"\n  "),v["\u0275\u0275template"](1,kt,10,2,"ng-container",36),v["\u0275\u0275text"](2,"\n")),2&t){var n=e.form,r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",n)("ngForTrackBy",r.trackByFn)}}function Tt(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"th",74),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,r=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("\n              ",v["\u0275\u0275pipeBind1"](2,1,n.list.hidden?r.service.cid+"."+n.name:""),"\n            ")}}function At(t,e){if(1&t&&v["\u0275\u0275element"](0,"mat-icon",79),2&t){v["\u0275\u0275nextContext"]();var n=v["\u0275\u0275reference"](5);v["\u0275\u0275property"]("popper",n)("popperTrigger","hover")("popperPlacement","bottom-end")}}function Lt(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"div"),v["\u0275\u0275text"](1,"\n                    "),v["\u0275\u0275elementStart"](2,"span",80),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](4,"\n                    "),v["\u0275\u0275elementStart"](5,"span",81),v["\u0275\u0275text"](6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](7,"\n                  "),v["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"]("",n.key," : "),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](n.msg)}}function Gt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                "),v["\u0275\u0275template"](2,At,1,3,"mat-icon",77),v["\u0275\u0275text"](3,"\n\n                "),v["\u0275\u0275elementStart"](4,"popper-content",null,78),v["\u0275\u0275text"](6,"\n                  "),v["\u0275\u0275template"](7,Lt,8,2,"div",44),v["\u0275\u0275text"](8,"\n                "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](9,"\n              "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().index,r=v["\u0275\u0275nextContext"](2).formName,i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",i.checkRowError(n)),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("ngForOf",i.errorsMsgs[r][n])}}function Vt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                    "),v["\u0275\u0275elementStart"](2,"span",82),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](4,"\n                  "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit,r=v["\u0275\u0275nextContext"](3).$implicit;v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](r.value[n.prop])}}function jt(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"span",82),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,r=v["\u0275\u0275nextContext"](4).$implicit,i=v["\u0275\u0275nextContext"](3).array,o=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](o.getSelectedItem(r.form.listPrefix,n,i.length))}}function Dt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                    "),v["\u0275\u0275elementStart"](2,"div",83),v["\u0275\u0275text"](3,"\n                      "),v["\u0275\u0275template"](4,jt,2,1,"span",84),v["\u0275\u0275text"](5,"\n                    "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](6,"\n                  "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit,r=v["\u0275\u0275nextContext"](3).$implicit;v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngForOf",r.value[n.prop])}}function Pt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                    "),v["\u0275\u0275text"](2,"\n\n                    "),v["\u0275\u0275elementStart"](3,"div",85),v["\u0275\u0275text"](4,"\n                      "),v["\u0275\u0275elementStart"](5,"mat-slide-toggle",86),v["\u0275\u0275text"](6,"\n                      "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](7,"\n                    "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](8,"\n                  "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"](3).$implicit,r=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("checked",r.value[null==n?null:n.name])("disabled",!0)}}function Rt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                  "),v["\u0275\u0275template"](2,Vt,5,1,"ng-container",35),v["\u0275\u0275text"](3,"\n                  "),v["\u0275\u0275template"](4,Dt,7,1,"ng-container",35),v["\u0275\u0275text"](5,"\n                  "),v["\u0275\u0275template"](6,Pt,9,2,"ng-container",35),v["\u0275\u0275text"](7,"\n                "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit;v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf","array"===n.type),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf","input_array"===n.type),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf","boolean"===n.type)}}function Nt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                "),v["\u0275\u0275template"](2,Rt,8,3,"ng-container",44),v["\u0275\u0275text"](3,"\n              "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",null==n?null:n.groupFields)}}function Bt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n                "),v["\u0275\u0275elementStart"](2,"span",87),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](4,"\n              "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]().$implicit,r=v["\u0275\u0275nextContext"](),i=r.$implicit,o=r.index,a=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](a.getSelectedItem(n.form.listPrefix,i.value[null==n?null:n.name],o))}}function $t(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"td",74),v["\u0275\u0275text"](1,"\n              "),v["\u0275\u0275template"](2,Nt,4,1,"ng-container",35),v["\u0275\u0275text"](3,"\n              "),v["\u0275\u0275template"](4,Bt,5,1,"ng-container",35),v["\u0275\u0275text"](5,"\n            "),v["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==n?null:n.groupFields),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!(null!=n&&n.groupFields))}}function zt(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",23),v["\u0275\u0275text"](1,"\n            "),v["\u0275\u0275elementStart"](2,"td"),v["\u0275\u0275text"](3,"\n              "),v["\u0275\u0275template"](4,Gt,10,2,"ng-container",35),v["\u0275\u0275text"](5,"\n            "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](6,"\n\n            "),v["\u0275\u0275template"](7,$t,6,2,"td",72),v["\u0275\u0275text"](8,"\n            "),v["\u0275\u0275elementStart"](9,"td"),v["\u0275\u0275text"](10,"\n              "),v["\u0275\u0275elementStart"](11,"mat-icon",75),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var t=e.index,r=v["\u0275\u0275nextContext"](2).formName;return v["\u0275\u0275nextContext"]().stepperRowAction("edit",r,t)})),v["\u0275\u0275text"](12,"\n                edit"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](13,"\n              "),v["\u0275\u0275elementStart"](14,"mat-icon",76),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var t=e.index,r=v["\u0275\u0275nextContext"](2).formName;return v["\u0275\u0275nextContext"]().stepperRowAction("delete",r,t)})),v["\u0275\u0275text"](15,"close"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](16,"\n            "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](17,"\n          "),v["\u0275\u0275elementEnd"]()}if(2&t){var r=e.index,i=v["\u0275\u0275nextContext"](2),o=i.array,a=i.formName,s=i.arrayForm,l=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("hidden",r===o.length-1||r===l.editId),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf",l.errorsMsgs&&l.errorsMsgs[a]&&l.errorsMsgs[a].length),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",l.getDisplayedColumns(s))}}function qt(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"table",71),v["\u0275\u0275text"](1,"\n        "),v["\u0275\u0275elementStart"](2,"thead"),v["\u0275\u0275text"](3,"\n          "),v["\u0275\u0275elementStart"](4,"tr"),v["\u0275\u0275text"](5,"\n            "),v["\u0275\u0275element"](6,"th"),v["\u0275\u0275text"](7,"\n            "),v["\u0275\u0275template"](8,Tt,3,3,"th",72),v["\u0275\u0275text"](9,"\n            "),v["\u0275\u0275element"](10,"th"),v["\u0275\u0275text"](11,"\n          "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](12,"\n        "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](13,"\n        "),v["\u0275\u0275elementStart"](14,"tbody"),v["\u0275\u0275text"](15,"\n          "),v["\u0275\u0275template"](16,zt,18,3,"tr",73),v["\u0275\u0275text"](17,"\n        "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](18,"\n      "),v["\u0275\u0275elementEnd"]()),2&t){var n=v["\u0275\u0275nextContext"](),r=n.arrayForm,i=n.array,o=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](8),v["\u0275\u0275property"]("ngForOf",o.getDisplayedColumns(r)),v["\u0275\u0275advance"](8),v["\u0275\u0275property"]("ngForOf",i)}}function Ut(t,e){if(1&t&&(v["\u0275\u0275text"](0,"\n  "),v["\u0275\u0275text"](1,"\n  "),v["\u0275\u0275elementStart"](2,"section",68),v["\u0275\u0275text"](3,"\n    "),v["\u0275\u0275elementStart"](4,"div",69),v["\u0275\u0275text"](5,"\n      "),v["\u0275\u0275template"](6,qt,19,2,"table",70),v["\u0275\u0275text"](7,"\n\n      "),v["\u0275\u0275text"](8,"\n      "),v["\u0275\u0275text"](9,"\n      "),v["\u0275\u0275text"](10,"\n      "),v["\u0275\u0275text"](11,"\n    "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](12,"\n  "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](13,"\n")),2&t){var n=e.array;v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("ngIf",n.length>1)}}function Mt(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n      "),v["\u0275\u0275elementStart"](2,"app-core-form-content",88),v["\u0275\u0275listener"]("showHideChanges",(function(t){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](3).showHideChanges(t)}))("UpdateFormFieldValueEmitter",(function(t){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](3).UpdateFormFieldValue(t)})),v["\u0275\u0275text"](3,"\n      "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](4,"\n    "),v["\u0275\u0275elementContainerEnd"]()}if(2&t){var r=v["\u0275\u0275nextContext"](2),i=r.field,o=r.formArrayWrap,a=r.formGroup,s=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("cid",s.service.cid)("service",s.service)("field",i)("form",s.getArrayFormControls(o)[a.id])("isEdit",s.isEdit)("isClone",s.isClone)("isSubmitted",s.isSubmitted)("fxFlex.gt-lg",s.getInputGridSize(null==i||null==i.form||null==i.form.grid?null:i.form.grid.gt_lg,s.gridGapSize))("fxFlex.lt-xl",s.getInputGridSize(null==i||null==i.form||null==i.form.grid?null:i.form.grid.lt_xl,s.gridGapSize))("fxFlex.lt-lg",s.getInputGridSize(null==i||null==i.form||null==i.form.grid?null:i.form.grid.lt_lg,s.gridGapSize))("fxFlex.lt-md",s.getInputGridSize(null==i||null==i.form||null==i.form.grid?null:i.form.grid.lt_md,s.gridGapSize))("fxFlex.lt-sm",s.getInputGridSize(null==i||null==i.form||null==i.form.grid?null:i.form.grid.lt_sm,s.gridGapSize))}}function Ht(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n      "),v["\u0275\u0275elementStart"](2,"app-core-form-content",88),v["\u0275\u0275listener"]("showHideChanges",(function(t){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](3).showHideChanges(t)}))("UpdateFormFieldValueEmitter",(function(t){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](3).UpdateFormFieldValue(t)})),v["\u0275\u0275text"](3,"\n      "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](4,"\n    "),v["\u0275\u0275elementContainerEnd"]()}if(2&t){var r=v["\u0275\u0275nextContext"](2).field,i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("cid",i.service.cid)("service",i.service)("field",r)("form",i.form)("isEdit",i.isEdit)("isClone",i.isClone)("isSubmitted",i.isSubmitted)("fxFlex.gt-lg",i.getInputGridSize(null==r||null==r.form||null==r.form.grid?null:r.form.grid.gt_lg,i.gridGapSize))("fxFlex.lt-xl",i.getInputGridSize(null==r||null==r.form||null==r.form.grid?null:r.form.grid.lt_xl,i.gridGapSize))("fxFlex.lt-lg",i.getInputGridSize(null==r||null==r.form||null==r.form.grid?null:r.form.grid.lt_lg,i.gridGapSize))("fxFlex.lt-md",i.getInputGridSize(null==r||null==r.form||null==r.form.grid?null:r.form.grid.lt_md,i.gridGapSize))("fxFlex.lt-sm",i.getInputGridSize(null==r||null==r.form||null==r.form.grid?null:r.form.grid.lt_sm,i.gridGapSize))}}function Yt(t,e){if(1&t&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1,"\n    "),v["\u0275\u0275template"](2,Mt,5,12,"ng-container",35),v["\u0275\u0275text"](3,"\n    "),v["\u0275\u0275template"](4,Ht,5,12,"ng-container",35),v["\u0275\u0275text"](5,"\n  "),v["\u0275\u0275elementContainerEnd"]()),2&t){var n=v["\u0275\u0275nextContext"](),r=n.formGroup,i=n.formArrayWrap;v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",r&&i),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!i)}}function Wt(t,e){if(1&t&&(v["\u0275\u0275text"](0,"\n  "),v["\u0275\u0275template"](1,Yt,6,2,"ng-container",35),v["\u0275\u0275text"](2,"\n")),2&t){var n=e.field,r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(null==n?null:n.form)&&r.fieldShowConditions(n))}}var Kt,Xt=function(t){return{"overflow-hidden":t}},Jt=function(t){return{headerSmallSize:t}},Qt=((Kt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a,s,l){var c;return _classCallCheck(this,n),(c=e.call(this,t,r,i,o,a,s,l)).dialogData=l,c.page_heading=!1,c.arrayValid=!1,c.filteredLists={neighborhood:[],units:[]},c.firstSelection=!1,c.items=[],c.stationsItems=[],c.backItems=[],c.errorsRows={stations:[],districts:[]},c.errorsMsgs={stations:[],districts:[]},c.tabsErrors=[!1,!1,!1],c.stationsUnitsInEdit=[],c}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.clearInput(),this.gridGapSize="10px",this.dialogData.id?(this.isEdit=!0,this.service.itemID=this.dialogData.id):this.service.itemID=null,this.service.clearUnitsFieldOnChange.pipe(Object(F.a)((function(){return t.alive}))).subscribe((function(e){e&&t.form.get("districts").controls[t.form.get("districts").controls.length-1].patchValue({units:[]})})),this.isEdit&&this.form.get("contractor_id").disable()}},{key:"ngAfterViewInit",value:function(){var t=this;this.form.valueChanges.pipe(Object(F.a)((function(){return t.alive})),Object(w.a)()).subscribe((function(e){3===t.stepper.selectedIndex&&"number"!=typeof t.index&&e.stations.forEach((function(e){setTimeout((function(){t.btnDisabled=!e.station_id||!e.stations_units||!e.stations_units.length}),5)})),3===t.stepper.selectedIndex&&"number"==typeof t.index&&e.stations.forEach((function(n){setTimeout((function(){t.btnDisabled=!e.stations[t.index].station_id||!e.stations[t.index].stations_units||!e.stations[t.index].stations_units.length}),5)})),2===t.stepper.selectedIndex&&"number"!=typeof t.index&&e.districts.forEach((function(e){setTimeout((function(){t.btnDisabled=!(e.district&&e.neighborhood&&e.units&&e.units.length)}),10)})),2===t.stepper.selectedIndex&&"number"==typeof t.index&&(t.btnDisabled=!(e.districts[t.index].district&&e.districts[t.index].neighborhood&&e.districts[t.index].units&&e.districts[t.index].units.length))})),this.service.back$.pipe(Object(F.a)((function(){return t.alive}))).subscribe((function(e){if(3===e){t.backItems=_toConsumableArray(t.items);var n=t.form.value.districts[t.form.value.districts.length-1];n.district&&n.neighborhood.id&&n.units.length&&(t.btnDisabled=!1)}}))}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this),this.service.lists=[],this.lists=[]}},{key:"toNext",value:function(t,e){1===this.stepper.selectedIndex&&(this.btnDisabled=!0),2===this.stepper.selectedIndex&&(this.backItems.length?this.isEqual(this.items,this.backItems)?(this.btnDisabled=!0,this.backItems=[],this.setDataStationsTab(this.items)):(this.setDataStationsTab(this.items),this.clearDataStationsTab(),this.btnDisabled=!0,this.backItems=[]):(this.setDataStationsTab(this.items),this.btnDisabled=!0)),this.index=null}},{key:"stepBack",value:function(){_get(_getPrototypeOf(n.prototype),"stepBack",this).call(this),this.service.back$.next(this.stepper.selectedIndex)}},{key:"isEqual",value:function(t,e){return JSON.stringify(t)===JSON.stringify(e)}},{key:"clearDataStationsTab",value:function(){for(var t=this.form.get("stations"),e=t.value.length-1;0<e;)this.removeArrayItem("stations",0),e-=1;t.reset()}},{key:"setDataStationsTab",value:function(t){this.setStationUnits(t),this.getStationsBySelectedDistricts(t)}},{key:"getStationsBySelectedDistricts",value:function(t){var e=this,n=[];this.form.get("districts").controls.forEach((function(t){Number.isInteger(t.value.district)&&(n=[].concat(_toConsumableArray(n),[t.value.district]))}));var r="transitional-station?";n.forEach((function(t){t&&(r=r+"districts[]="+t+"&")})),r=r.substring(0,r.length-1),this.service.lists.transition_station=this.dialogData.id?_toConsumableArray(this.service.lists.transition_station):[],this.service.apiRequest("GET",r).pipe(Object(F.a)((function(){return e.alive})),Object(k.a)(300)).subscribe((function(t){e.service.lists.transition_station=[],e.service.lists.transition_station=_toConsumableArray(t.data)}))}},{key:"setStationUnits",value:function(t){var e=[];t.forEach((function(t){t.units&&t.units.length&&t.units.forEach((function(t){e.push(t.id)}))})),e=e.filter(this.onlyUnique),this.service.lists.transition_stations_units=_toConsumableArray(this.service.lists.units.filter((function(t){return!e.includes(t.id)})))}},{key:"onlyUnique",value:function(t,e,n){return n.indexOf(t)===e}},{key:"formSubmission",value:function(t){return this.stepper.selectedIndex=0,_get(_getPrototypeOf(n.prototype),"formSubmission",this).call(this,t)}},{key:"clearInput",value:function(){var t=this;this.service.clearInput.pipe(Object(F.a)((function(){return t.alive}))).subscribe((function(e){if("neighborhood"===e){var n,r=t.form.get("districts");n=null!=t.editId?t.editId:r.length-1,t.firstSelection?(r.controls[n].controls[e].setValue(null),t.service.lists[e]=[]):t.firstSelection=!0}}))}},{key:"getArrayFormControls",value:function(t){return this.form.get(t).controls}},{key:"refactorItem",value:function(t){return _get(_getPrototypeOf(n.prototype),"refactorItem",this).call(this,t),t.photo&&(this.previewImage=t.photo),t.stations&&t.stations.forEach((function(t){t.station_id&&(t.station_id={id:t.station_id,name:t.station_name}),t.units&&(t.units=t.units.map((function(t){return t.name=t.plate_number,t})))})),this.stationsUnitsInEdit=t.stations.map((function(t){return t.units})),t}},{key:"formInjectValues",value:function(t){var e=this;this.items=t.districts;var n="districts",r=this.service.featureProps.filter((function(t){return t.name==n}))[0].form.arrayForm;t.contractor_id=t.contractor.id,t.contact_id=t.contact.id,t.contact_name=t.contact.name,t.contact_email=t.contact.email,t.contact_title=t.contact.title,t.contact_phone=t.contact.phone,t=this.districtsHandle(t);var i=this.form.get(n);t[n].forEach((function(t){i.push(e.createArrayItem(r,n))}));var o=this.service.featureProps.filter((function(t){return"contractor_id"==t.name}));return o&&this.service.onChangedValue(o[0],{id:t.contractor_id}),n="stations",r=this.service.featureProps.filter((function(t){return t.name==n}))[0].form.arrayForm,t=this.stationsHandle(t),i=this.form.get(n),t[n].forEach((function(t){i.push(e.createArrayItem(r,n))})),setTimeout((function(){e.form.patchValue(t),e.arrayValid=!0}),0),this.form}},{key:"stationsHandle",value:function(t){return t.stations.forEach((function(e,n){e.units&&(t.stations[n].stations_units=e.units),e.station_id=e.station_id.id})),this.service.lists.transition_station=t.stations.map((function(t){return{name:t.station_name,id:t.station_id}})),this.service.lists.transition_stations_units=t.stations.map((function(t){return t.stations_units})).flat(),t}},{key:"districtsHandle",value:function(t){var e=this;return t.districts.forEach((function(n,r){var i;if(n.neighborhood_id&&n.neighborhood_name){var o={id:n.neighborhood_id,name:n.neighborhood_name};e.filteredLists.neighborhood.push(o),e.service.lists.selected_neighborhood=e.filteredLists.neighborhood,t.districts[r].neighborhood=o}n.district_id&&(t.districts[r].district=n.district_id),n.units&&(t.districts[r].units=n.units.map((function(t){return t.id=parseInt(t.id),t.name=t.plate_number,t})),(i=e.filteredLists.units).push.apply(i,_toConsumableArray(n.units.map((function(t){return t.name=t.plate_number,t})))),e.service.lists.selected_units=e.filteredLists.units)})),t}},{key:"getSelectedItem",value:function(t,e,n){var r;if(e)return"districts"===t&&this.service.lists[t]?r=this.service.lists[t].filter((function(t){return t.id===e})):"neighborhood"===t?(this.filteredLists[t]||(this.filteredLists[t]=[]),r=this.filteredLists[t].filter((function(t){return t.id===e.id}))):"transition_station"===t&&this.service.lists[t]?r=this.service.lists[t].filter((function(t){return t.id===e})):"transition_stations_units"===t&&this.service.lists[t]?(r=this.service.lists[t].filter((function(t){return t.id===e.id})),this.stationsUnitsInEdit.length&&this.dialogData.id&&this.stationsUnitsInEdit.forEach((function(t){r.length||(r=t.filter((function(t){return t.id===e.id})))}))):(this.filteredLists[t]||(this.filteredLists[t]=[]),r=this.filteredLists[t].filter((function(t){return t.id===e.id}))),r[0]?r[0].name?r[0].name:r.name?r.name:null:null}},{key:"initLists",value:function(){this.lists=[{"users/contracts":1}]}},{key:"showErrorMsg",value:function(t){"districts"===t&&this.service.shared.toastr.error("\u064a\u062c\u0628 \u0627\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u062d\u0649 \u063a\u064a\u0631 \u0645\u0643\u0631\u0631"),"stations"===t&&this.service.shared.toastr.error("\u0627\u0644\u0645\u062d\u0637\u0629 \u0627\u0644\u0627\u0646\u062a\u0642\u0627\u0644\u064a\u0629  \u0645\u0643\u0631\u0631\u0629")}},{key:"addArrayItem",value:function(t,e){var n=this;if("districts"===e){var r,i=this.form.get(e);if(this.items=i.value,r="number"!=typeof this.editId?i.controls[i.controls.length-1]:i.controls[this.editId],Object.keys(r.controls).forEach((function(t){var e=r.get(t);e.updateValueAndValidity(),e.markAsTouched({onlySelf:!0}),e.markAsDirty({onlySelf:!0})})),r.valid){if("number"!=typeof this.editId)this.items.splice(this.items.length-1,1),this.items.some((function(t){return t.neighborhood.id===r.value.neighborhood.id}))?this.showErrorMsg(e):(i.push(this.createArrayItem(t,e)),this.items=i.value,this.arrayValid=!0,this.service.lists.neighborhood=[],this.errorsRows&&this.errorsRows[e]&&this.errorsRows[e].length&&(this.errorsRows[e]=this.errorsRows[e].filter((function(t){return t!==n.items.length-2}))));else{if(this.items.splice(this.editId,1),this.items.some((function(t){return t.neighborhood&&t.neighborhood.id?t.neighborhood.id===r.value.neighborhood.id:null})))return this.showErrorMsg(e);i.controls.splice(i.controls.length-1,1),i.push(this.createArrayItem(t,e)),this.items=i.value,this.arrayValid=!0,this.service.lists.neighborhood=[]}this.filterSelectedItems(r),this.handleToggle(i,this.editId||i.controls.length-2,r),this.editId=null,this.index=null,this.clearDataStationsTab()}this.btnDisabled=!0}if("stations"===e){var o,a=this.form.get(e);if(this.stationsItems=a.value,o="number"!=typeof this.editId?a.controls[a.controls.length-1]:a.controls[this.editId],Object.keys(o.controls).forEach((function(t){var e=o.get(t);e.updateValueAndValidity(),e.markAsTouched({onlySelf:!0}),e.markAsDirty({onlySelf:!0})})),o.valid){if("number"!=typeof this.editId)this.stationsItems.splice(this.stationsItems.length-1,1),this.stationsItems.some((function(t){return t.station_id===o.value.station_id}))?this.showErrorMsg(e):(a.push(this.createArrayItem(t,e)),this.stationsItems=a.value,this.arrayValid=!0);else{if(this.stationsItems.splice(this.editId,1),this.stationsItems.some((function(t){return t.station_id&&t.station_id?t.station_id===o.value.station_id:null})))return this.showErrorMsg(e);a.controls.splice(a.controls.length-1,1),a.push(this.createArrayItem(t,e)),this.arrayValid=!0}this.handleToggle(a,this.editId||a.controls.length-2,o),this.editId=null,this.index=null}this.btnDisabled=!0}}},{key:"removeArrayItem",value:function(t,e){this.form.get(t),_get(_getPrototypeOf(n.prototype),"removeArrayItem",this).call(this,t,e),"districts"===t&&(this.form.get(t).controls.length<2&&(this.arrayValid=!1),this.clearDataStationsTab())}},{key:"returnArrayValues",value:function(t){this.service.lists.neighborhood||(this.service.lists.neighborhood=[]),this.filteredLists.units=this.filteredLists.units.filter((function(e){return!t.units.includes(e)})),this.service.lists.selected_neighborhood=this.filteredLists.neighborhood,this.service.lists.selected_units=this.filteredLists.units,this.service.lists.selected_units=this.filteredLists.units}},{key:"filterSelectedItems",value:function(t){var e=this;this.tempEdit&&(this.filteredLists.neighborhood=this.filteredLists.neighborhood.filter((function(t){return t!==e.tempEdit.neighborhood}))),this.filteredLists.neighborhood=[].concat(_toConsumableArray(this.filteredLists.neighborhood),[t.value.neighborhood]),this.filteredLists.units=[].concat(_toConsumableArray(this.filteredLists.units),_toConsumableArray(t.value.units)),this.service.lists.neighborhood||(this.service.lists.neighborhood=[]),this.service.lists.selected_neighborhood=this.filteredLists.neighborhood,this.service.lists.selected_units=this.filteredLists.units}},{key:"createArrayItem",value:function(t,e){var n=this.mapFields(t);return this.fb.group(n)}},{key:"stepperRowAction",value:function(t,e,n){var r=this;if(this.index=n,null==this.editId&&"edit"===t){this.firstSelection=!1,this.editId=n,this.errorsRows&&this.errorsRows[e]&&this.errorsRows[e].length&&(this.errorsRows[e]=this.errorsRows[e].filter((function(t){return t!==r.editId}))),this.btnDisabled=!1,"districts"===e&&this.items.splice(this.editId,1),"stations"===e&&this.stationsItems.splice(this.editId,1),this.tempEdit=this.form.get("districts").controls[n].value;var i=this.service.featureProps.filter((function(t){return"districts"==t.name})),o=this.form.get("districts").controls[n].get("district").value;this.form.get("districts").controls[n].get("units").value.map((function(t){return t.id})),this.form.get("districts").controls[n].get("units"),this.service.onChangedValue(i[0].form.arrayForm[0],{id:o})}"delete"===t&&(this.form.markAsTouched(),this.form.markAsDirty(),this.removeArrayItem(e,n),this.errorsRows[e]=this.errorsRows[e].filter((function(t){return t!==r.index})),this.errorsMsgs[e].splice(n,1),this.errorsRows[e].forEach((function(t,n){t>r.index&&(r.errorsRows[e][n]=t-1)})),"districts"===e&&(this.items.splice(n,1),this.items=this.items.filter((function(t){return t.neighborhood}))),this.btnDisabled=!0)}},{key:"validateFormBeforeSumbit",value:function(t){(this.editId||0===this.editId)&&this.tempEdit&&this.cancelUpdate(),_get(_getPrototypeOf(n.prototype),"formSubmission",this).call(this,t)}},{key:"cancelUpdate",value:function(){var t,e=this;this.filteredLists.neighborhood.push(this.tempEdit.neighborhood),(t=this.filteredLists.units).push.apply(t,_toConsumableArray(this.tempEdit.units)),this.service.lists.units=this.service.lists.units.filter((function(t){return!e.filteredLists.units.includes(t)})),this.form.get("districts").controls[this.editId].patchValue(this.tempEdit),this.editId=null,this.tempEdit=null,this.btnDisabled=!0}},{key:"ServerValidationErrors",value:function(t){var e=this;if(t){this.resetErrors(),console.log("errors",t),Object.keys(t).forEach((function(n,r){var i=e.form.get(n);i&&(i.setErrors({serverError:t[n]}),i.markAsTouched())})),this.addValidationToLastItemInArray();var n=["contractor","contractor_id","start_at","end_at"];Object.keys(t).forEach((function(r,i){n.includes(r)?e.tabsErrors[0]=!0:r.includes("districts")?(e.errorsRows.districts=e.getErrorsRows(t,"units","districts").ids,e.errorsMsgs.districts=e.getErrorsRows(t,"units","districts").msgs,e.tabsErrors[2]=!0):r.includes("stations")?(e.errorsRows.stations=e.getErrorsRows(t,"stations_units","stations").ids,e.errorsMsgs.stations=e.getErrorsRows(t,"stations_units","stations").msgs,e.tabsErrors[3]=!0):e.tabsErrors[1]=!0}));var r=this.tabsErrors.find((function(t){return t})),i=this.tabsErrors.indexOf(r);this.stepper.selectedIndex=i}}},{key:"getErrorsRows",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=Object.keys(t),o=[],a=[],s=[],l=[];i.forEach((function(t){var e=t.split(".")[0],n=+t.split(".")[1],i=+t.split(".")[3];e===r&&(s.push(e),o.push(n),a.push(i))})),o.forEach((function(r,o){var c=e.form.get(s[o]).controls[r].value[n][a[o]].name;l[r]?l[r].push({key:c,msg:t[i[o]][0]}):l[r]=[{key:c,msg:t[i[o]][0]}]}));var c={};return c.ids=[].concat(o),c.msgs=[].concat(l),c}},{key:"checkRowError",value:function(t){if(2===this.stepper.selectedIndex){if(this.errorsRows&&this.errorsRows.districts&&this.errorsRows.districts.length)return this.errorsRows.districts.includes(t)}else if(3===this.stepper.selectedIndex&&this.errorsRows&&this.errorsRows.stations&&this.errorsRows.stations.length)return this.errorsRows.stations.includes(t)}},{key:"resetErrors",value:function(){this.tabsErrors=[!1,!1,!1,!1],this.errorsMsgs={station:[],districts:[]},this.errorsRows={station:[],districts:[]}}},{key:"validateArrayGroup",value:function(){var t=this.getFormControl("districts").controls;t.forEach((function(e,n){n<t.length-1||Object.values(e.controls).forEach((function(t,e){t.setValidators([]),t.updateValueAndValidity()}))}))}},{key:"addValidationToLastItemInArray",value:function(){var t=this.getFormControl("districts").controls;t.forEach((function(e,n){n===t.length-1&&Object.values(e.controls).forEach((function(t,e){t.setValidators([m.G.required])}))}))}},{key:"prepareFormAfterSubmit",value:function(){_get(_getPrototypeOf(n.prototype),"prepareFormAfterSubmit",this).call(this)}},{key:"refactorFormBeforeSubmit",value:function(t){t.contractor_id=this.form.getRawValue().contractor_id,t.contact={name:t.contact_name,title:t.contact_title,email:t.contact_email,phone:t.contact_phone},t.start_at&&(t.start_at=this.service.shared.momentFormat(t.start_at)),t.end_at&&(t.end_at=this.service.shared.momentFormat(t.end_at)),t.contract_number&&(t.contract_number=parseInt(t.contract_number)),t.status&&(t.status=!!+t.status),t.districts&&(t.districts.length>1&&(t.districts[t.districts.length-1].district||t.districts.pop()),t.districts=t.districts.map((function(t){return t.district_id=t.district,t.neighborhood_id=t.neighborhood.id,t.units_ids=t.units.map((function(t){return t.id})),t}))),t.stations&&(t.stations.length>1&&(t.stations[t.stations.length-1].station_id||t.stations.pop()),t.stations.length&&t.stations.forEach((function(t){t.units_ids=t.stations_units&&t.stations_units.length?t.stations_units.map((function(t){return t.id})):[]}))),_get(_getPrototypeOf(n.prototype),"refactorFormBeforeSubmit",this).call(this,t)}},{key:"markFormGroupTouched",value:function(t){var e=this;Object.values(t.controls).forEach((function(t,n){t.markAsTouched(),t.markAsDirty(),t.controls&&e.markFormGroupTouched(t)}))}},{key:"lists",get:function(){return this._lists},set:function(t){this._lists=t}}]),n}(_.a)).\u0275fac=function(t){return new(t||Kt)(v["\u0275\u0275directiveInject"](b),v["\u0275\u0275directiveInject"](m.f),v["\u0275\u0275directiveInject"](a.a),v["\u0275\u0275directiveInject"](O.p),v["\u0275\u0275directiveInject"](I.a),v["\u0275\u0275directiveInject"](E.h),v["\u0275\u0275directiveInject"](E.a))},Kt.\u0275cmp=v["\u0275\u0275defineComponent"]({type:Kt,selectors:[["app-contracts-form"]],features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:66,vars:24,consts:[["mat-dialog-title",""],[2,"float","left","cursor","pointer",3,"click"],["mat-dialog-content","",3,"ngClass"],["ngClass.gt-md","form-spacing lg",3,"ngClass"],["class","overlay-form",4,"ngIf"],["fxFlex","","fxLayout","column",1,"core-form-style",3,"formGroup"],["fxFlex","","fxLayout","","class","page_heading",4,"ngIf"],["fxFlex","","fxLayout",""],["fxFlex",""],["fxFlex","","fxLayout","column",1,"d-flex","flex-items-center"],["fxFlex","","fxLayout","column",1,"default-form"],["fxFlex","","fxLayout","column","class","flex-wrap-margin-fixer",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["fxFlex","","fxLayout","","class","page_footer",4,"ngIf"],["class","dummyDataLoader","id","dummyDataLoader",4,"ngIf"],["mat-dialog-content","",1,"mat-dialog-actions"],[3,"form","isSaveAddNew","isEdit","isClone","isSubmitted","formValid","submit","saveAddNew","cancel"],["formTemplateRef",""],["tableTemplateRef",""],["fieldTemplateRef",""],[1,"overlay-form"],[3,"diameter"],["fxFlex","","fxLayout","",1,"page_heading"],[1,"title"],[3,"hidden"],["parent",""],["class","breadcrumb",4,"ngFor","ngForOf"],[3,"form","isSaveAddNew","isEdit","isClone","isSubmitted","submit","saveAddNew","cancel"],[1,"breadcrumb"],["mat-button","","href","",3,"routerLink",4,"ngIf"],["mat-button","",4,"ngIf"],["class","icon",4,"ngIf"],["mat-button","","href","",3,"routerLink"],["mat-button",""],[1,"icon"],["fxFlex","","fxLayout","column",1,"flex-wrap-margin-fixer",3,"ngStyle"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["fxFlex","","fxLayout","column",1,"form-section","defaultSection"],["class","form-section-title",4,"ngIf"],["fxFlex","column wrap",1,"form-section-content","flex-wrap",3,"fxLayoutGap"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-section-title"],["labelPosition","bottom",3,"linear","selectedIndex","ngClass"],["stepper",""],[4,"ngFor","ngForOf"],[3,"completed"],["matStepLabel",""],["fxFlex","","fxLayout","column",1,"pt-5"],["svgIcon","error",4,"ngIf"],["svgIcon","error"],["fxFlex","","fxLayout","column",1,"form-section"],["fxFlex","",1,"form-section-content","flex-wrap",3,"fxLayoutGap"],["fxFlex","","fxLayout","row",1,"stepper-actions"],["mat-button","",3,"disabled","click"],["color","primary","svgIcon","chevron-right-circle",1,"mdi-icon","w-h-auto","ml-2"],[1,"display-inline-block"],["color","primary","svgIcon","chevron-left-circle",1,"mdi-icon","w-h-auto","mr-2"],["fxFlex","","fxLayout","",1,"page_footer"],["id","dummyDataLoader",1,"dummyDataLoader"],["mat-icon-button","",3,"click"],["color","warn"],[3,"formGroup"],["class","potato",3,"formArrayName",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",1,"btn-primary",3,"disabled","click"],["mat-flat-button","","color","warn","class","btn-danger mr-4",3,"disabled","click",4,"ngIf"],[1,"potato",3,"formArrayName"],["fxFlex","","fxLayout","column",3,"formGroupName","hidden"],["mat-flat-button","","color","warn",1,"btn-danger","mr-4",3,"disabled","click"],["id","my-table",1,"mdl-grid","d-block","full-width"],[1,""],["class","mdl-data-table mdl-js-data-table mdl-data-table--selectable full-width",4,"ngIf"],[1,"mdl-data-table","mdl-js-data-table","mdl-data-table--selectable","full-width"],["class","mdl-data-table__cell--non-numeric",4,"ngFor","ngForOf"],[3,"hidden",4,"ngFor","ngForOf"],[1,"mdl-data-table__cell--non-numeric"],[1,"mr-4","cursor-pointer","icon-md","main-color",3,"click"],["color","warn",1,"cursor-pointer","icon-md","warn",3,"click"],["svgIcon","error",3,"popper","popperTrigger","popperPlacement",4,"ngIf"],["popper1Content",""],["svgIcon","error",3,"popper","popperTrigger","popperPlacement"],[1,"popper-key"],[1,"popper-msg"],[1,"gray-tag"],[1,"flex-wrap","flex-wrap-content"],["class","gray-tag",4,"ngFor","ngForOf"],[1,"field-container"],["color","primary",3,"checked","disabled"],[1,"text-primary"],[3,"cid","service","field","form","isEdit","isClone","isSubmitted","fxFlex.gt-lg","fxFlex.lt-xl","fxFlex.lt-lg","fxFlex.lt-md","fxFlex.lt-sm","showHideChanges","UpdateFormFieldValueEmitter"]],template:function(t,e){1&t&&(v["\u0275\u0275elementStart"](0,"h1",0),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementStart"](3,"mat-icon",1),v["\u0275\u0275listener"]("click",(function(){return e.closeDialog()})),v["\u0275\u0275text"](4,"close"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](5,"\n"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](6,"\n"),v["\u0275\u0275elementStart"](7,"div",2),v["\u0275\u0275text"](8,"\n  "),v["\u0275\u0275elementStart"](9,"div",3),v["\u0275\u0275text"](10,"\n    "),v["\u0275\u0275template"](11,q,4,1,"div",4),v["\u0275\u0275text"](12,"\n    "),v["\u0275\u0275elementStart"](13,"form",5),v["\u0275\u0275text"](14,"\n      "),v["\u0275\u0275template"](15,K,13,7,"div",6),v["\u0275\u0275text"](16,"\n\n      "),v["\u0275\u0275elementStart"](17,"div",7),v["\u0275\u0275text"](18,"\n        "),v["\u0275\u0275elementStart"](19,"mat-card",8),v["\u0275\u0275text"](20,"\n          "),v["\u0275\u0275elementStart"](21,"mat-card-content"),v["\u0275\u0275text"](22,"\n            "),v["\u0275\u0275elementStart"](23,"div",9),v["\u0275\u0275text"](24,"\n              "),v["\u0275\u0275elementStart"](25,"div",10),v["\u0275\u0275text"](26,"\n                "),v["\u0275\u0275template"](27,dt,10,5,"div",11),v["\u0275\u0275pipe"](28,"pairs"),v["\u0275\u0275text"](29,"\n              "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](30,"\n            "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](31,"\n          "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](32,"\n          "),v["\u0275\u0275element"](33,"mat-card-footer"),v["\u0275\u0275text"](34,"\n        "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](35,"\n      "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](36,"\n      "),v["\u0275\u0275template"](37,ut,6,5,"div",12),v["\u0275\u0275text"](38,"\n    "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](39,"\n  "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](40,"\n\n  "),v["\u0275\u0275template"](41,mt,8,0,"div",13),v["\u0275\u0275text"](42,"\n"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](43,"\n\n"),v["\u0275\u0275elementStart"](44,"div",14),v["\u0275\u0275text"](45,"\n  "),v["\u0275\u0275elementStart"](46,"app-custom-form-footer",15),v["\u0275\u0275listener"]("submit",(function(){return e.formSubmission()}))("saveAddNew",(function(){return e.formSubmission(!0)}))("cancel",(function(){return e.cancelFormSubmission()})),v["\u0275\u0275text"](47,"\n  "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](48,"\n  "),v["\u0275\u0275text"](49,"\n  "),v["\u0275\u0275text"](50,"\n"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](51,"\n\n"),v["\u0275\u0275text"](52,"\n\n"),v["\u0275\u0275text"](53,"\n"),v["\u0275\u0275template"](54,Ot,3,2,"ng-template",null,16,v["\u0275\u0275templateRefExtractor"]),v["\u0275\u0275text"](56,"\n"),v["\u0275\u0275text"](57,"\n\n"),v["\u0275\u0275template"](58,Ut,14,1,"ng-template",null,17,v["\u0275\u0275templateRefExtractor"]),v["\u0275\u0275text"](60,"\n"),v["\u0275\u0275text"](61,"\n"),v["\u0275\u0275template"](62,Wt,3,1,"ng-template",null,18,v["\u0275\u0275templateRefExtractor"]),v["\u0275\u0275text"](64,"\n"),v["\u0275\u0275text"](65,"\n")),2&t&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("\n  ",v["\u0275\u0275pipeBind1"](2,16,e.isEdit?e.service.cid+".update":e.service.cid+".create"),"\n  "),v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("ngClass",v["\u0275\u0275pureFunction1"](20,Xt,e.isSubmitted)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngClass",v["\u0275\u0275pureFunction1"](22,Jt,e.headerSmallSize)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!e.loaded&&e.isEdit||e.isSubmitted),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("formGroup",e.form),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.service.page_heading),v["\u0275\u0275advance"](12),v["\u0275\u0275property"]("ngForOf",v["\u0275\u0275pipeBind1"](28,18,e.service.formInputsCategorized))("ngForTrackBy",e.trackByFn),v["\u0275\u0275advance"](10),v["\u0275\u0275property"]("ngIf",e.page_heading),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf",e.service.dummyDataLoader),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("form",e.form)("isSaveAddNew",e.isSaveAddNew)("isEdit",e.isEdit)("isClone",e.isClone)("isSubmitted",e.isSubmitted)("formValid",e.arrayValid))},directives:[E.i,T.a,E.f,i.q,A.a,i.t,m.I,m.t,L.b,L.f,m.k,G.a,G.d,i.s,G.e,V.a,j.c,D.a,P.a,R.a,a.g,i.w,A.d,L.g,i.A,N.a,N.b,N.d,R.b,m.e,m.l,B.b,B.c,$.a,z.a],pipes:[y.c,O.X],encapsulation:2,data:{animation:[Object(C.o)("showHide",[Object(C.n)("void => *",[Object(C.p)(S.b,{params:{timings:"200ms ease-in-out",transform:"translateY(-10%)",opacity:"0"}})]),Object(C.n)("* => void",[Object(C.p)(S.a,{params:{timings:"200ms 200ms ease-in-out",transform:"translateY(-10%)",opacity:"0"}})])])]}}),Kt),Zt=n("EkSr"),te=n("gpoT"),ee=n("CREh"),ne=n("NhFE"),re=function(t){return{headerSmallSize:t}};function ie(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",8),v["\u0275\u0275text"](1,"\n    "),v["\u0275\u0275elementStart"](2,"app-list-grid-options",9),v["\u0275\u0275listener"]("openForm",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().openForm({open:!0})})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](3,"\n  "),v["\u0275\u0275elementEnd"]()}if(2&t){var r=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("ngClass",v["\u0275\u0275pureFunction1"](4,re,r.headerSmallSize)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("listOptions",r.listOptions)("showTitle",r.showTitle)("service",r.service)}}function oe(t,e){if(1&t&&(v["\u0275\u0275elementStart"](0,"div",10),v["\u0275\u0275text"](1,"\n    "),v["\u0275\u0275element"](2,"app-pagination",11),v["\u0275\u0275text"](3,"\n  "),v["\u0275\u0275elementEnd"]()),2&t){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("service",n.service)("options",n.listOptions)}}function ae(t,e){if(1&t){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",12),v["\u0275\u0275text"](1,"\n  "),v["\u0275\u0275elementStart"](2,"button",13),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().service.loadDummyData()})),v["\u0275\u0275text"](3,"\n    "),v["\u0275\u0275elementStart"](4,"mat-icon",14),v["\u0275\u0275text"](5,"\n      battery_unknown\n    "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](6,"\n  "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](7,"\n"),v["\u0275\u0275elementEnd"]()}}var se,le,ce,de=((se=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a){var s;return _classCallCheck(this,n),(s=e.call(this,t,r,i,o,a)).listOptions=Object.assign(Object.assign({},s.listOptions),{exportList:!1,exportListWithOptions:!0,activate:!1,deactivate:!1,selectable:!0,restore:!1,archive:!1,delete:!0,edit:!0,addAction:!0,checkFields:{activateField:"status",deactivateField:"status"},clone:!1,actionsCssClass:"action-thead",pagination:!1,infiniteScrolling:!0,infiniteScrollingHeight:"var(--listHeight)"}),s}return _createClass(n,[{key:"openForm",value:function(t){t.open&&(t.id?this.openDialog(Qt,{id:t.id}):this.openDialog(Qt))}},{key:"ngOnInit",value:function(){return _get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this)}}]),n}(l.a)).\u0275fac=function(t){return new(t||se)(v["\u0275\u0275directiveInject"](b),v["\u0275\u0275directiveInject"](c.a),v["\u0275\u0275directiveInject"](a.d),v["\u0275\u0275directiveInject"](a.a),v["\u0275\u0275directiveInject"](E.b))},se.\u0275cmp=v["\u0275\u0275defineComponent"]({type:se,selectors:[["app-contracts-list"]],features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:9,consts:[["fxFlex","","fxLayout","column",1,"core-list"],["fxFlex","","fxLayout","","class","page_heading list-grid-options","id","tableOptions",3,"ngClass",4,"ngIf"],["fxFlex","","fxLayout","row",1,"filter-section"],["fxFlex","100",3,"service","listOptions","params"],["fxFlex","","fxLayout","row","fxLayoutGap","20px",1,"container","list-grid-container"],[3,"columns","options","service","openForm"],["fxFlex","","fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","end center","class","container list-grid-pagination",4,"ngIf"],["class","dummyDataLoader","id","dummyDataLoader",4,"ngIf"],["fxFlex","","fxLayout","","id","tableOptions",1,"page_heading","list-grid-options",3,"ngClass"],["fxFlex","",3,"listOptions","showTitle","service","openForm"],["fxFlex","","fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","end center",1,"container","list-grid-pagination"],[3,"service","options"],["id","dummyDataLoader",1,"dummyDataLoader"],["mat-icon-button","",3,"click"],["color","warn"]],template:function(t,e){1&t&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275text"](1,"\n  "),v["\u0275\u0275template"](2,ie,4,6,"div",1),v["\u0275\u0275text"](3,"\n  "),v["\u0275\u0275elementStart"](4,"div",2),v["\u0275\u0275text"](5,"\n    "),v["\u0275\u0275element"](6,"app-list-multiple-operations",3),v["\u0275\u0275text"](7,"\n  "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](8,"\n  "),v["\u0275\u0275elementStart"](9,"div",4),v["\u0275\u0275text"](10,"\n    "),v["\u0275\u0275elementStart"](11,"app-list-grid",5),v["\u0275\u0275listener"]("openForm",(function(t){return e.openForm(t)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](12,"\n  "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](13,"\n  "),v["\u0275\u0275template"](14,oe,4,2,"div",6),v["\u0275\u0275text"](15,"\n  "),v["\u0275\u0275text"](16,"\n  "),v["\u0275\u0275text"](17,"\n  "),v["\u0275\u0275text"](18,"\n"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](19,"\n\n"),v["\u0275\u0275template"](20,ae,8,0,"div",7),v["\u0275\u0275text"](21,"\n"),v["\u0275\u0275text"](22,"\n")),2&t&&(v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.appListGridOptions),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("service",e.service)("listOptions",e.listOptions)("params",e.params),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("columns",e.columns)("options",e.listOptions)("service",e.service),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",!(null!=e.listOptions&&e.listOptions.infiniteScrolling)),v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("ngIf",e.service.dummyDataLoader))},directives:[L.b,L.f,i.t,Zt.a,L.g,te.a,i.q,A.a,ee.a,L.e,ne.a,R.b,T.a],encapsulation:2}),se),ue=n("LMle"),me=[{path:"",component:de,data:{title:Object(s.g)("contracts"),breadcrumb:"contracts",permissionsKeys:[{module:"contract",key:"read-contract"}]},canActivate:[ue.a],children:[{path:"create",component:Qt,data:{title:Object(s.g)("create"),breadcrumb:"contracts.create",permissionsKeys:[{module:"contract",key:"create-contract"}]},canActivate:[ue.a]},{path:"edit/:id",component:Qt,data:{isEdit:!0,title:Object(s.g)("edit"),breadcrumb:"contracts.edit",permissionsKeys:[{module:"contract",key:"update-contract"}]},canActivate:[ue.a]},{path:"clone/:id",component:Qt,data:{isClone:!0,title:Object(s.g)("clone"),breadcrumb:"contracts.clone"}}]},{path:"archive-list",component:de,data:{title:Object(s.g)("archive-list"),breadcrumb:"contracts_archive",isArchive:!1}}],pe=((ce=function t(){_classCallCheck(this,t)}).components=[de,Qt],ce.\u0275mod=v["\u0275\u0275defineNgModule"]({type:ce}),ce.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(t){return new(t||ce)},imports:[[a.h.forChild(me)],a.h]}),ce),fe=((le=function t(){_classCallCheck(this,t)}).\u0275mod=v["\u0275\u0275defineNgModule"]({type:le}),le.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(t){return new(t||le)},imports:[[i.c,o.a,pe]]}),le)}}]);